/**
 * Author and copyright: Stefan Haack (https://shaack.com)
 * Repository: https://github.com/shaack/bootstrap-input-spinner
 * License: MIT, see file 'LICENSE'
 */
!function(t){"use strict";var n=!1,e=t.fn.val;function o(t,e){t.addEventListener("mousedown",function(t){t.preventDefault(),e(t)}),t.addEventListener("touchstart",function(t){t.cancelable&&t.preventDefault(),e(t)}),t.addEventListener("keydown",function(t){32!==t.keyCode&&13!==t.keyCode||n||(n=!0,e(t))})}t.fn.val=function(t){if(arguments.length>=1&&this[0]&&this[0]["bootstrap-input-spinner"]&&this[0].setValue){var n=this[0];setTimeout(function(){n.setValue(t)})}return e.apply(this,arguments)},t.fn.InputSpinner=t.fn.inputSpinner=function(e){var a={decrementButton:"<strong>-</strong>",incrementButton:"<strong>+</strong>",groupClass:"",buttonsClass:"btn-outline-secondary",buttonsWidth:"2.5rem",textAlign:"center",autoDelay:500,autoInterval:100,boostThreshold:10,boostMultiplier:"auto",locale:null,readOnlyInputs:!1};for(var r in e)a[r]=e[r];var u='<div class="input-group '+a.groupClass+'"><div class="input-group-prepend"><button style="min-width: '+a.buttonsWidth+'" class="btn btn-decrement '+a.buttonsClass+'" type="button">'+a.decrementButton+'</button></div><input type="text" style="text-align: '+a.textAlign+'" class="form-control"'+(a.readOnlyInputs?" disabled":"")+'/><div class="input-group-append"><button style="min-width: '+a.buttonsWidth+'" class="btn btn-increment '+a.buttonsClass+'" type="button">'+a.incrementButton+"</button></div></div>",i=a.locale||navigator.language||"en-US";return this.each(function(){var e=t(this);e[0]["bootstrap-input-spinner"]=!0,e.hide();var r=null,p=null,s="auto"===a.boostMultiplier,l=s?1:a.boostMultiplier,d=t(u),c=d.find(".btn-decrement"),f=d.find(".btn-increment"),m=d.find("input"),v=null,b=null,g=null,h=null,y=null,x=null,I=null;V();var E,w,C=parseFloat(e[0].value),M=0,F=e.attr("data-prefix")||"",N=e.attr("data-suffix")||"";if(F){var O=t('<span class="input-group-text">'+F+"</span>");d.find(".input-group-prepend").append(O)}if(N){var T=t('<span class="input-group-text">'+N+"</span>");d.find(".input-group-append").prepend(T)}function k(t,n){void 0===n&&(n=!0),isNaN(t)||""===t?(e[0].value="",n&&(m[0].value=""),C=NaN):(t=parseFloat(t),t=Math.min(Math.max(t,v),b),t=Math.round(t*Math.pow(10,y))/Math.pow(10,y),e[0].value=t,n&&(m[0].value=I.format(t)),C=t)}function D(t,n,e){n&&setTimeout(function(){var o;"function"==typeof CustomEvent?o=new CustomEvent(n,{bubbles:!0,detail:{direction:e}}):(o=document.createEvent("Event")).initEvent(n,!0,!0,{direction:e}),t[0].dispatchEvent(o)})}function L(t){(a.readOnlyInputs||!m[0].disabled&&!m[0].readOnly)&&(B(t),S(),r=setTimeout(function(){p=setInterval(function(){M>a.boostThreshold?s?(B(t*parseInt(l,10)),l<1e8&&(l*=1.1),h&&(l=Math.min(h,l))):B(t*l):B(t),M++},a.autoInterval)},a.autoDelay))}function B(t){isNaN(C)&&(C=0),k(Math.round(C/t)*t+t);var n=t>0?1:t<0?-1:0;D(e,"input",n),D(e,"change",n)}function S(){M=0,l=l=s?1:a.boostMultiplier,clearTimeout(r),clearTimeout(p)}function V(){m.prop("required",e.prop("required")),m.prop("placeholder",e.prop("placeholder"));var t=a.readOnlyInputs||e.prop("disabled"),n=e.prop("readonly");m.prop("disabled",t),m.prop("readonly",n),f.prop("disabled",!a.readOnlyInputs&&(t||n)),c.prop("disabled",!a.readOnlyInputs&&(t||n)),a.readOnlyInputs||!t&&!n||S();var o=e.prop("class"),r="";/form-control-sm/g.test(o)?r="input-group-sm":/form-control-lg/g.test(o)&&(r="input-group-lg");var u=o.replace(/form-control(-(sm|lg))?/g,"");d.prop("class","input-group "+r+" "+a.groupClass),m.prop("class","form-control "+u),v=parseFloat(e.prop("min"))||0,b=isNaN(e.prop("max"))||""===e.prop("max")?1/0:parseFloat(e.prop("max")),g=parseFloat(e.prop("step"))||1,h=parseInt(e.attr("data-step-max"))||0;var p=parseInt(e.attr("data-decimals"))||0,s=!("false"===e.attr("data-digit-grouping"));y===p&&x===s||(y=p,x=s,I=new Intl.NumberFormat(i,{minimumFractionDigits:y,maximumFractionDigits:y,useGrouping:x}))}e[0].setValue=function(t){k(t)},new MutationObserver(function(){V(),k(C,!0)}).observe(e[0],{attributes:!0}),e.after(d),k(C),m.on("paste input change focusout",function(t){var n,o,a,r,u=m[0].value,p="focusout"===t.type;n=u,o=new Intl.NumberFormat(i),a=o.format(1111).replace(/1/g,""),r=o.format(1.1).replace(/1/g,""),k(u=parseFloat(n.replace(new RegExp("\\"+a,"g"),"").replace(new RegExp("\\"+r),".")),p),D(e,t.type)}),o(c[0],function(){L(-g)}),o(f[0],function(){L(g)}),E=document.body,w=function(){S()},E.addEventListener("mouseup",function(t){w(t)}),E.addEventListener("touchend",function(t){w(t)}),E.addEventListener("keyup",function(t){32!==t.keyCode&&13!==t.keyCode||(n=!1,w(t))})}),this}}(jQuery);